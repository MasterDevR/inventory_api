generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum role {
  RECEIVER
  APPROVER
  DEPARTMENT
}

enum supplyType {
  OFFICE
  OTHER
}

enum requestStatus {
  PENDING
  REVIEWING
  APPROVED
  PREPARING
  READY
  REJECTED
}

model departmentInformation {
  id         String               @id @unique @default(uuid())
  image      String?
  deptId     String               @unique // Primary key
  role       role
  deptCode   String               @unique
  department String               @unique
  email      String?              @unique
  password   String
  createdAt  DateTime             @default(now())
  updatedAt  DateTime             @updatedAt
  Request    requestInformation[]
}

model adminInformation {
  id           String             @id @unique @default(uuid())
  department   String             @default("admin")
  image        String?
  adminId      String             @unique // Primary key
  role         role
  email        String?            @unique
  password     String
  createdAt    DateTime           @default(now())
  updatedAt    DateTime           @updatedAt
  createdStock stockInformation[]
}

model stockInformation {
  id             String           @id @unique @default(uuid())
  price          Int
  image          String
  consumeDate    Int
  reference      String
  itemName       String
  description    String
  stockNo        String           @unique
  reOrderPoint   String           @unique
  measurement    String
  quantity       Int
  distributor    String
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  createdBy      String
  createdByAdmin adminInformation @relation(fields: [createdBy], references: [id])
}

model requestInformation {
  id             String                @id @unique @default(uuid())
  qty            Int
  unit           String
  description    String
  remarks        String
  purpose        String
  stockNo        String
  deptId         String
  requestType    supplyType?
  request_status requestStatus
  createAt       DateTime              @default(now())
  updatedAt      DateTime              @updatedAt
  request        departmentInformation @relation(fields: [deptId], references: [deptId])
}
